# Nintendo Switch internal
## rtld
"runtime link editor"の略。プログラム実行時に最初に実行されるバイナリ。crt0的な。
主な役割はSystem loaderにロードされたNSO(static library)などのアドレス再配置。
- rtld自身の.dynamicを読んで自身に含まれるシンボル再配置
- 必要なモジュールのリスト(?)をロード
- svcQueryMemoryで決まった正規の(?)メモリリージョンを取得してその領域がモジュールオブジェクト(MOD)
のヘッダなら(i.e. "MOD0"が含まれている)モジュールの.dynamicと.bssオフセットを取得
- モジュールオブジェクトを初期化
- 上記を全てのモジュールに行う。
- これらが完了した後はプログラムの初期化処理(crt0)っぽい動作に専念する。

NSO,NRO自体はちょっと特殊なELF形式のモジュール。rtldがゲーム起動時などにリンクをするために
MODというモジュールオブジェクトを利用してこれらをリンクするっぽい。

## 実行バイナリ(NSO)
ゲーム等の実行バイナリ自体はNSOフォーマット。一度メモリにロードされるとヘッダは破棄される。
NROやNSOバイナリは先頭に'NRO0'や'NSO0'のマジックナンバーがある。またモジュールヘッダへのオフセット
の位置にモジュールヘッダ('MOD0')が埋め込まれている。つまりNRO/NSOバイナリはNRO0,MOD0(複数リストで繋がる)のように二つ以上のシグネチャが
ある。
# Dolphin Emulator internal
